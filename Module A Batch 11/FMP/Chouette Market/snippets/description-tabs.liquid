{% assign ras_tabs = product.description | split: '<h1>' %}
{% if product.metafields.custom.product_reviewer_cover_pic != blank %}
  <div class="custom-product-description-main">
    <div class="custom-product-card">
      <div class="custom-product-card-background-image">
        <img src="{{ product.metafields.custom.product_reviewer_cover_pic | img_url: 'master' }}">
        <div class="custom-product-card-icon">Vendeur confirm√©</div>
      </div>
      <div class="custom-product-card-content">
        <h2>{{ product.metafields.custom.product_reviewer_name }}</h2>
        <h3>{{ product.metafields.custom.product_reviewer_location }}</h3>
        <div class="star-rating-review">
          <div class="star-box">
            {% for i in (1..settings.ratting_1) %}
              {% if i > settings.ratting_1 %}
                {% break %}
              {% else %}
                <img src="{{ settings.star | img_url: 'master' }}">
              {% endif %}
            {% endfor %}
            <h4>{{ settings.ratting_text }}</h4>
          </div>
        </div>
      </div>
      <div class="custom-product-card-avatar">
        <img src="{{ product.metafields.custom.avatar | img_url: 'master' }}">
      </div>
    </div>
    <div class="custom-product-tabs">
      <div class="tab">
        {% for tab in ras_tabs %}
          {% if forloop.index0 > 0 %}
            {% assign tabD = tab | split: '</h1>' %}
            <button
              {% if forloop.index0 == 1 %}
                id="defaultOpen"
              {% endif %}
              class="tablinks"
              onclick="openCity(event, 'tab{{forloop.index0}}')"
            >
              {{ tabD[0] }}
            </button>
          {% endif %}
        {% endfor %}
      </div>

      {% for tab in ras_tabs %}
        {% if forloop.index0 > 0 %}
          {% assign tabD = tab | split: '</h1>' %}
          <div id="tab{{forloop.index0}}" class="tabcontent">
            <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>
            <p>{{ tabD[1] }}</p>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endif %}
<script>
  function openCity(evt, cityName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
    evt.currentTarget.className += " active";
  }

  // Get the element with id="defaultOpen" and click on it
  document.getElementById("defaultOpen").click();
</script>

<style>
                               /* Style the tab */
                               .custom-product-description-main{
                                 max-width: 1024px;
                                 width: 100%;
                                 margin: 0 auto;
                                 padding: 60px 20px;
                                 display: flex;
                               }
                               .custom-product-card-background-image{
                                 border-radius: 12px 0px 0px 0px;
                               }
     .custom-product-card-background-image img{
                                 border-radius: 12px 0px 0px 0px;
                               }
                               .custom-product-tabs{
                                  width: 68%;
                                     height: 320px;
                               }
                               .custom-product-card{
                                 width: 32%;
                                 max-width: 320px;
                                 position: relative;
                                 border: 1px solid #064E3B;
                                 border-radius: 12px 0px 0px 12px;
                                     height: 320px;
                               }
                               .custom-product-card-content{
                                     display: flex;
                                     flex-direction: column;
                                     justify-content: center;
                                     height: 60%;
                               }
                               .star-rating-review img{
                                 width: 15px;
                                 margin-right: 2px;
                               }
                               .star-rating-review h4{
                                 font-size: 16px;
                                 color: #484641;
                                 font-weight: 700;
                                 margin-left: 5px;
                               }
                               .star-box{
                                 display: flex;
                                 justify-content: center;
                                 align-items: center;

                               }
                               .custom-product-card-content h2{
                               font-size: 18px;
                               font-weight: 700;
                               color: #EA571D;
                                 text-align:center;
                                 padding-bottom: 10px;
                               }
                               .custom-product-card-content h3{
                                 font-size: 12px;
                                 font-weight: 700;
                                 color: #1E2C21;
                                 text-align:center;
                                 margin-left: 20px;
                                 position: relative;
                                 padding-bottom: 10px;
                               }
                               .custom-product-card-avatar{
                                 position: absolute;
                                 left: 50%;
                                 top: 45%;
                                 transform: translate(-50%, -55%);
                               }
                               .custom-product-card-avatar img{
                                 width: 75px;
                                 padding: 0px;
                                 border-radius: 50%;
                                 border: 3px solid #fff;
                               }
                               .custom-product-card-content h3:before{
                                 content: url('https://cdn.shopify.com/s/files/1/0789/9778/2834/files/icon.svg?v=1692968406');
                                 position: absolute;
                                 width: 20px;
                                left: 45px;
                                top: -2px;
                               }
                               .custom-product-card-background-image{
                                 line-height: 100%;
                               }
                               .tab {
                                 overflow: hidden;
                                 display: flex;
                                 gap: 2px;
                                 background-color: #f7f0e9;
                                 position: relative;
                                 left: 2px;
                               }

                               /* Style the buttons inside the tab */
                               .tab button {
                                 background-color: #D1DCCE;
                                 border: none;
                                 outline: none;
                                 cursor: pointer;
                                 padding:10px;
                                 border: 1px solid #064E3B;
                                 transition: 0.3s;
                                 font-size: 14px;
                               }

                               /* Change background color of buttons on hover */
                               .tab button:hover {
                                 background-color: #FFF6EE;
                               }

                               /* Create an active/current tablink class */
                               .tab button.active {
                                 background-color: #FFF6EE;
                               }

                               /* Style the tab content */
                               .tabcontent {
                                 display: none;
                                 padding: 30px;
                                 border: 1px solid #064E3B;
                                 border-radius: 0px 12px 12px 0px;
                               }
                               .tabcontent ul{
                                 padding: 0;
                                 margin: 0;
                                 position: relative
                               }
                               .tabcontent ul li{
                                 list-style: none;
                               }
                               .tabcontent ul li:before{
                                 content: "";
                                 position: absolute;
                                 width: 10px;
                                 height: 10px;
                                 background-color: #000;
                                 left: 0;
                                 top: 5px;
                               }
                               .tabcontent ul li span{
                                 margin-left: 15px;
                               }
                               .tabcontent {
                                 font-size: 11px;
                                 font-weight: 400;
                                 color: #000;
                                 height: 277px;
                               }
                               .tablinks:last-child{
                                 border-radius: 0px 12px 0px 0px;
                               }
                               .custom-product-tabs .tab-block-heading{
                                 margin-bottom: 20px;
                               }
                               .tab-block {
                                 padding: 10px 0px;
                               }
    .custom-product-tabs .custom-recettes{
       margin-bottom: 15px;
     }
    .custom-product-tabs .custom-travail{
       margin-bottom: 15px;
     }
    .custom-product-tabs .custom-abonnement{
       margin-bottom: 15px;
     }

    .main-image li:before{
    content: none !important;
  }
    .main-image li{
      list-style: disc !important;
    }
    .main-image {
   margin-bottom: 15px !important;
  }
  #defaultOpen strong{
    font-weight: 500;
  }
  .tablinks b{
    font-weight: 500;
  }
                               /* Style the close button */
                               .topright {
                                 float: right;
                                 cursor: pointer;
                                 font-size: 28px;
                                 display: none;
                               }

                               .topright:hover {color: red;}
                               .custom-product-card-icon{
                                 font-size: 14px;
                                 font-weight: 500;
                                 color: #fff;
                                 letter-spacing: 0px;
                                 border-radius: 12px 0px 0px 0px;
                                 position: absolute;
                                 top: 0px;
                                 left: 0px;
                                 padding: 5px;
                                 background-color: #49946D;
                               }
                                @media only screen and (max-width:800px){

                                  .custom-product-card{
                                    display: none;
                                  }
                                  .custom-product-description-main {
                                 padding: 30px 0px;
                                 display: flex;
                                 flex-wrap: wrap;
                             }
                                  .custom-product-card{
                                    width: 100%;
                                    max-width: 100%;
                                  }
                                  .custom-product-tabs{
                                     width: 100%;
                                     max-width: 100%;
                                  }
                                  .custom-product-card-content {
                              height: auto;
                               padding: 10px;
           align-items: flex-start;
                           }
                                  .custom-product-card-content h3:before {
                               left: 0px;
                           }
                                  .custom-product-tabs{
                                    margin-top: 15px;
                                  }
                                  .tab button {
                             padding: 4px;
                             font-size: 10px;
                         }
                                  .tabcontent {
                           padding: 10px;
                           border-radius: 0px 0px 12px 12px;
                       }
                                  .tabcontent {
                         font-size: 10px;
                         height: auto;
                     }
                                  .custom-product-tabs {
                       height: auto;
                   }
                                  .tablinks:last-child {
                     border-radius: 0px 0px 0px 0px;
                 }
                                  .custom-product-card {
                   height: auto;
               }
                                  .tabcontent ul li:before {
                 width: 8px;
                 height: 8px;
                 background-color: #000;
                 left: 2px;
                 top: 4px;
             }
             .custom-product-card-content h2 {
             font-size: 14px;
             padding-bottom: 10px;
         }
             .custom-product-card-content h3 {
               font-size: 12px;
               padding-bottom: 10px;
               padding-left: 15px;
                   margin-left: 0px;
           }
                                  .custom-product-card-avatar img {
           width: 50px;
           border: 2px solid #fff;
       }
                                  .custom-product-card {
         border-radius: 12px 12px 12px 12px;
     }
                                  .custom-product-card-background-image img{
                                 border-radius: 12px 12px 0px 0px;
                                  }
                                }
</style>
